import{k as ve,l as me,m as ye,P as D,T as N,a as O}from"./@solana-CKixXqEH.js";import{g as fe}from"./@babel-D6-XlEtG.js";import{b as m}from"./bs58-DGbdKtE6.js";var J={exports:{}},se;function we(){return se||(se=1,function(s){var o=Object.prototype.hasOwnProperty,e="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(e=!1));function n(u,i,c){this.fn=u,this.context=i,this.once=c||!1}function r(u,i,c,d,v){if(typeof c!="function")throw new TypeError("The listener must be a function");var _=new n(c,d||u,v),h=e?e+i:i;return u._events[h]?u._events[h].fn?u._events[h]=[u._events[h],_]:u._events[h].push(_):(u._events[h]=_,u._eventsCount++),u}function a(u,i){--u._eventsCount===0?u._events=new t:delete u._events[i]}function l(){this._events=new t,this._eventsCount=0}l.prototype.eventNames=function(){var i=[],c,d;if(this._eventsCount===0)return i;for(d in c=this._events)o.call(c,d)&&i.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(c)):i},l.prototype.listeners=function(i){var c=e?e+i:i,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var v=0,_=d.length,h=new Array(_);v<_;v++)h[v]=d[v].fn;return h},l.prototype.listenerCount=function(i){var c=e?e+i:i,d=this._events[c];return d?d.fn?1:d.length:0},l.prototype.emit=function(i,c,d,v,_,h){var y=e?e+i:i;if(!this._events[y])return!1;var f=this._events[y],w=arguments.length,x,p;if(f.fn){switch(f.once&&this.removeListener(i,f.fn,void 0,!0),w){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,c),!0;case 3:return f.fn.call(f.context,c,d),!0;case 4:return f.fn.call(f.context,c,d,v),!0;case 5:return f.fn.call(f.context,c,d,v,_),!0;case 6:return f.fn.call(f.context,c,d,v,_,h),!0}for(p=1,x=new Array(w-1);p<w;p++)x[p-1]=arguments[p];f.fn.apply(f.context,x)}else{var B=f.length,E;for(p=0;p<B;p++)switch(f[p].once&&this.removeListener(i,f[p].fn,void 0,!0),w){case 1:f[p].fn.call(f[p].context);break;case 2:f[p].fn.call(f[p].context,c);break;case 3:f[p].fn.call(f[p].context,c,d);break;case 4:f[p].fn.call(f[p].context,c,d,v);break;default:if(!x)for(E=1,x=new Array(w-1);E<w;E++)x[E-1]=arguments[E];f[p].fn.apply(f[p].context,x)}}return!0},l.prototype.on=function(i,c,d){return r(this,i,c,d,!1)},l.prototype.once=function(i,c,d){return r(this,i,c,d,!0)},l.prototype.removeListener=function(i,c,d,v){var _=e?e+i:i;if(!this._events[_])return this;if(!c)return a(this,_),this;var h=this._events[_];if(h.fn)h.fn===c&&(!v||h.once)&&(!d||h.context===d)&&a(this,_);else{for(var y=0,f=[],w=h.length;y<w;y++)(h[y].fn!==c||v&&!h[y].once||d&&h[y].context!==d)&&f.push(h[y]);f.length?this._events[_]=f.length===1?f[0]:f:a(this,_)}return this},l.prototype.removeAllListeners=function(i){var c;return i?(c=e?e+i:i,this._events[c]&&a(this,c)):(this._events=new t,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,s.exports=l}(J)),J.exports}var ge=we();const be=fe(ge);let H;const xe=new Uint8Array(16);function Ee(){if(!H&&(H=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!H))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return H(xe)}const g=[];for(let s=0;s<256;++s)g.push((s+256).toString(16).slice(1));function Se(s,o=0){return g[s[o+0]]+g[s[o+1]]+g[s[o+2]]+g[s[o+3]]+"-"+g[s[o+4]]+g[s[o+5]]+"-"+g[s[o+6]]+g[s[o+7]]+"-"+g[s[o+8]]+g[s[o+9]]+"-"+g[s[o+10]]+g[s[o+11]]+g[s[o+12]]+g[s[o+13]]+g[s[o+14]]+g[s[o+15]]}const Ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ae={randomUUID:Ae};function Ie(s,o,e){if(ae.randomUUID&&!s)return ae.randomUUID();s=s||{};const t=s.random||(s.rng||Ee)();return t[6]=t[6]&15|64,t[8]=t[8]&63|128,Se(t)}function ne(s){return s.version===void 0}function Q(s){return ne(s)?s.serialize({verifySignatures:!1,requireAllSignatures:!1}):s.serialize()}var he=function(s,o,e,t){function n(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(c){try{i(t.next(c))}catch(d){a(d)}}function u(c){try{i(t.throw(c))}catch(d){a(d)}}function i(c){c.done?r(c.value):n(c.value).then(l,u)}i((t=t.apply(s,o||[])).next())})};function X(s){return he(this,void 0,void 0,function*(){try{return yield s.request({method:"wallet_getSnaps"}),!0}catch{return!1}})}function Te(){return he(this,void 0,void 0,function*(){try{const s=window.ethereum;if(!s)return null;if(s.providers&&Array.isArray(s.providers)){const o=s.providers;for(const e of o)if(yield X(e))return e}if(s.detected&&Array.isArray(s.detected)){const o=s.detected;for(const e of o)if(yield X(e))return e}return(yield X(s))?s:null}catch(s){return console.error(s),null}})}const Me="solana:mainnet",Oe="solana:devnet",je="solana:testnet",Pe="solana:localnet",pe=[Me,Oe,je,Pe];function Y(s){return pe.includes(s)}var j=function(s,o,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?s!==o||!t:!o.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(s):t?t.value:o.get(s)},P=function(s,o,e,t,n){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof o=="function"?s!==o||!n:!o.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?n.call(s,e):n?n.value=e:o.set(s,e),e},L,R,z,$,F,q;const Ce=pe,ke=[ve,me,ye];class V{get address(){return j(this,L,"f")}get publicKey(){return j(this,R,"f").slice()}get chains(){return j(this,z,"f").slice()}get features(){return j(this,$,"f").slice()}get label(){return j(this,F,"f")}get icon(){return j(this,q,"f")}constructor({address:o,publicKey:e,label:t,icon:n}){L.set(this,void 0),R.set(this,void 0),z.set(this,void 0),$.set(this,void 0),F.set(this,void 0),q.set(this,void 0),new.target===V&&Object.freeze(this),P(this,L,o,"f"),P(this,R,e,"f"),P(this,z,Ce,"f"),P(this,$,ke,"f"),P(this,F,t,"f"),P(this,q,n,"f")}}L=new WeakMap,R=new WeakMap,z=new WeakMap,$=new WeakMap,F=new WeakMap,q=new WeakMap;var S=function(s,o,e,t){function n(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(c){try{i(t.next(c))}catch(d){a(d)}}function u(c){try{i(t.throw(c))}catch(d){a(d)}}function i(c){c.done?r(c.value):n(c.value).then(l,u)}i((t=t.apply(s,o||[])).next())})};class G extends be{constructor(o){super(),this._network="mainnet-beta",this._iframeParams={},this._element=null,this._iframe=null,this._publicKey=null,this._account=null,this._isConnected=!1,this._connectHandler=null,this._messageHandlers={},this._handleEvent=e=>{var t,n;switch(e.type){case"connect":{this._collapseIframe(),!((t=e.data)===null||t===void 0)&&t.publicKey?(this._publicKey=e.data.publicKey,this._isConnected=!0,this._connectHandler&&(this._connectHandler.resolve(),this._connectHandler=null),this._connected()):(this._connectHandler&&(this._connectHandler.reject(),this._connectHandler=null),this._disconnected());return}case"disconnect":{this._connectHandler&&(this._connectHandler.reject(),this._connectHandler=null),this._disconnected();return}case"accountChanged":{!((n=e.data)===null||n===void 0)&&n.publicKey?(this._publicKey=e.data.publicKey,this.emit("accountChanged",this.publicKey),this._standardConnected()):(this.emit("accountChanged",void 0),this._standardDisconnected());return}default:return}},this._handleResize=e=>{e.resizeMode==="full"?e.params.mode==="fullscreen"?this._expandIframe():e.params.mode==="hide"&&this._collapseIframe():e.resizeMode==="coordinates"&&this._resizeIframe(e.params)},this._handleMessage=e=>{var t;if(((t=e.data)===null||t===void 0?void 0:t.channel)!=="solflareIframeToWalletAdapter")return;const n=e.data.data||{};if(n.type==="event")this._handleEvent(n.event);else if(n.type==="resize")this._handleResize(n);else if(n.type==="response"&&this._messageHandlers[n.id]){const{resolve:r,reject:a}=this._messageHandlers[n.id];delete this._messageHandlers[n.id],n.error?a(n.error):r(n.result)}},this._removeElement=()=>{this._element&&(this._element.remove(),this._element=null)},this._removeDanglingElements=()=>{const e=document.getElementsByClassName("solflare-metamask-wallet-adapter-iframe");for(const t of e)t.parentElement&&t.remove()},this._injectElement=()=>{this._removeElement(),this._removeDanglingElements();const e=Object.assign(Object.assign({},this._iframeParams),{mm:!0,v:1,cluster:this._network||"mainnet-beta",origin:window.location.origin||"",title:document.title||""}),t=Object.keys(e).map(r=>`${r}=${encodeURIComponent(e[r])}`).join("&"),n=`${G.IFRAME_URL}?${t}`;this._element=document.createElement("div"),this._element.className="solflare-metamask-wallet-adapter-iframe",this._element.innerHTML=`
      <iframe src='${n}' style='position: fixed; top: 0; bottom: 0; left: 0; right: 0; width: 100%; height: 100%; border: none; border-radius: 0; z-index: 99999; color-scheme: auto;' allowtransparency='true'></iframe>
    `,document.body.appendChild(this._element),this._iframe=this._element.querySelector("iframe"),window.addEventListener("message",this._handleMessage,!1)},this._collapseIframe=()=>{this._iframe&&(this._iframe.style.top="",this._iframe.style.right="",this._iframe.style.height="2px",this._iframe.style.width="2px")},this._expandIframe=()=>{this._iframe&&(this._iframe.style.top="0px",this._iframe.style.bottom="0px",this._iframe.style.left="0px",this._iframe.style.right="0px",this._iframe.style.width="100%",this._iframe.style.height="100%")},this._resizeIframe=e=>{this._iframe&&(this._iframe.style.top=isFinite(e.top)?`${e.top}px`:"",this._iframe.style.bottom=isFinite(e.bottom)?`${e.bottom}px`:"",this._iframe.style.left=isFinite(e.left)?`${e.left}px`:"",this._iframe.style.right=isFinite(e.right)?`${e.right}px`:"",this._iframe.style.width=isFinite(e.width)?`${e.width}px`:e.width,this._iframe.style.height=isFinite(e.height)?`${e.height}px`:e.height)},this._sendIframeMessage=e=>{if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");return new Promise((t,n)=>{var r,a;const l=Ie();this._messageHandlers[l]={resolve:t,reject:n},(a=(r=this._iframe)===null||r===void 0?void 0:r.contentWindow)===null||a===void 0||a.postMessage({channel:"solflareWalletAdapterToIframe",data:Object.assign({id:l},e)},"*")})},this._connected=()=>{this._isConnected=!0,this.emit("connect",this.publicKey),this._standardConnected()},this._disconnected=()=>{this._publicKey=null,this._isConnected=!1,window.removeEventListener("message",this._handleMessage,!1),this._removeElement(),this.emit("disconnect"),this._standardDisconnected()},this._standardConnected=()=>{if(!this.publicKey)return;const e=this.publicKey.toString();(!this._account||this._account.address!==e)&&(this._account=new V({address:e,publicKey:this.publicKey.toBytes()}),this.emit("standard_change",{accounts:this.standardAccounts}))},this._standardDisconnected=()=>{this._account&&(this._account=null,this.emit("standard_change",{accounts:this.standardAccounts}))},o!=null&&o.network&&(this._network=o==null?void 0:o.network),window.SolflareMetaMaskParams&&(this._iframeParams=Object.assign(Object.assign({},this._iframeParams),window.SolflareMetaMaskParams)),o!=null&&o.params&&(this._iframeParams=Object.assign(Object.assign({},this._iframeParams),o==null?void 0:o.params))}get publicKey(){return this._publicKey?new D(this._publicKey):null}get standardAccount(){return this._account}get standardAccounts(){return this._account?[this._account]:[]}get isConnected(){return this._isConnected}get connected(){return this.isConnected}get autoApprove(){return!1}connect(){return S(this,void 0,void 0,function*(){this.connected||(this._injectElement(),yield new Promise((o,e)=>{this._connectHandler={resolve:o,reject:e}}))})}disconnect(){return S(this,void 0,void 0,function*(){yield this._sendIframeMessage({method:"disconnect"}),this._disconnected()})}signTransaction(o){var e;return S(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const t=Q(o),n=yield this._sendIframeMessage({method:"signTransactionV2",params:{transaction:m.encode(t)}}),{transaction:r}=n;return ne(o)?N.from(m.decode(r)):O.deserialize(m.decode(r))}catch(t){throw new Error(((e=t==null?void 0:t.toString)===null||e===void 0?void 0:e.call(t))||"Failed to sign transaction")}})}signAllTransactions(o){var e;return S(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const t=o.map(r=>Q(r)),{transactions:n}=yield this._sendIframeMessage({method:"signAllTransactionsV2",params:{transactions:t.map(r=>m.encode(r))}});return n.map((r,a)=>ne(o[a])?N.from(m.decode(r)):O.deserialize(m.decode(r)))}catch(t){throw new Error(((e=t==null?void 0:t.toString)===null||e===void 0?void 0:e.call(t))||"Failed to sign transactions")}})}signAndSendTransaction(o,e){var t;return S(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const n=Q(o),{signature:r}=yield this._sendIframeMessage({method:"signAndSendTransaction",params:{transaction:m.encode(n),options:e}});return r}catch(n){throw new Error(((t=n==null?void 0:n.toString)===null||t===void 0?void 0:t.call(n))||"Failed to sign and send transaction")}})}signMessage(o,e="utf8"){var t;return S(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const{signature:n}=yield this._sendIframeMessage({method:"signMessage",params:{data:m.encode(o),display:e}});return Uint8Array.from(m.decode(n))}catch(n){throw new Error(((t=n==null?void 0:n.toString)===null||t===void 0?void 0:t.call(n))||"Failed to sign message")}})}sign(o,e="utf8"){return S(this,void 0,void 0,function*(){return yield this.signMessage(o,e)})}static isSupported(){return S(this,void 0,void 0,function*(){return!!(yield Te())})}standardSignAndSendTransaction(...o){return S(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected");const e=[];if(o.length===1){const{transaction:t,account:n,chain:r,options:a}=o[0],{minContextSlot:l,preflightCommitment:u,skipPreflight:i,maxRetries:c}=a||{};if(n!==this._account)throw new Error("invalid account");if(!Y(r))throw new Error("invalid chain");const d=yield this.signAndSendTransaction(O.deserialize(t),{preflightCommitment:u,minContextSlot:l,maxRetries:c,skipPreflight:i});e.push({signature:m.decode(d)})}else if(o.length>1)for(const t of o)e.push(...yield this.standardSignAndSendTransaction(t));return e})}standardSignTransaction(...o){return S(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected");const e=[];if(o.length===1){const{transaction:t,account:n,chain:r}=o[0];if(n!==this._account)throw new Error("invalid account");if(r&&!Y(r))throw new Error("invalid chain");const a=yield this.signTransaction(O.deserialize(t));e.push({signedTransaction:a.serialize()})}else if(o.length>1){let t;for(const a of o){if(a.account!==this._account)throw new Error("invalid account");if(a.chain){if(!Y(a.chain))throw new Error("invalid chain");if(t){if(a.chain!==t)throw new Error("conflicting chain")}else t=a.chain}}const n=o.map(({transaction:a})=>O.deserialize(a)),r=yield this.signAllTransactions(n);e.push(...r.map(a=>({signedTransaction:a.serialize()})))}return e})}standardSignMessage(...o){return S(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected");const e=[];if(o.length===1){const{message:t,account:n}=o[0];if(n!==this._account)throw new Error("invalid account");const r=yield this.signMessage(t);e.push({signedMessage:t,signature:r})}else if(o.length>1)for(const t of o)e.push(...yield this.standardSignMessage(t));return e})}}G.IFRAME_URL="https://widget.solflare.com/";const it=Object.freeze(Object.defineProperty({__proto__:null,StandardSolflareMetaMaskWalletAccount:V,default:G},Symbol.toStringTag,{value:"Module"}));var Z={exports:{}},ce;function Ke(){return ce||(ce=1,function(s){var o=Object.prototype.hasOwnProperty,e="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(e=!1));function n(u,i,c){this.fn=u,this.context=i,this.once=c||!1}function r(u,i,c,d,v){if(typeof c!="function")throw new TypeError("The listener must be a function");var _=new n(c,d||u,v),h=e?e+i:i;return u._events[h]?u._events[h].fn?u._events[h]=[u._events[h],_]:u._events[h].push(_):(u._events[h]=_,u._eventsCount++),u}function a(u,i){--u._eventsCount===0?u._events=new t:delete u._events[i]}function l(){this._events=new t,this._eventsCount=0}l.prototype.eventNames=function(){var i=[],c,d;if(this._eventsCount===0)return i;for(d in c=this._events)o.call(c,d)&&i.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(c)):i},l.prototype.listeners=function(i){var c=e?e+i:i,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var v=0,_=d.length,h=new Array(_);v<_;v++)h[v]=d[v].fn;return h},l.prototype.listenerCount=function(i){var c=e?e+i:i,d=this._events[c];return d?d.fn?1:d.length:0},l.prototype.emit=function(i,c,d,v,_,h){var y=e?e+i:i;if(!this._events[y])return!1;var f=this._events[y],w=arguments.length,x,p;if(f.fn){switch(f.once&&this.removeListener(i,f.fn,void 0,!0),w){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,c),!0;case 3:return f.fn.call(f.context,c,d),!0;case 4:return f.fn.call(f.context,c,d,v),!0;case 5:return f.fn.call(f.context,c,d,v,_),!0;case 6:return f.fn.call(f.context,c,d,v,_,h),!0}for(p=1,x=new Array(w-1);p<w;p++)x[p-1]=arguments[p];f.fn.apply(f.context,x)}else{var B=f.length,E;for(p=0;p<B;p++)switch(f[p].once&&this.removeListener(i,f[p].fn,void 0,!0),w){case 1:f[p].fn.call(f[p].context);break;case 2:f[p].fn.call(f[p].context,c);break;case 3:f[p].fn.call(f[p].context,c,d);break;case 4:f[p].fn.call(f[p].context,c,d,v);break;default:if(!x)for(E=1,x=new Array(w-1);E<w;E++)x[E-1]=arguments[E];f[p].fn.apply(f[p].context,x)}}return!0},l.prototype.on=function(i,c,d){return r(this,i,c,d,!1)},l.prototype.once=function(i,c,d){return r(this,i,c,d,!0)},l.prototype.removeListener=function(i,c,d,v){var _=e?e+i:i;if(!this._events[_])return this;if(!c)return a(this,_),this;var h=this._events[_];if(h.fn)h.fn===c&&(!v||h.once)&&(!d||h.context===d)&&a(this,_);else{for(var y=0,f=[],w=h.length;y<w;y++)(h[y].fn!==c||v&&!h[y].once||d&&h[y].context!==d)&&f.push(h[y]);f.length?this._events[_]=f.length===1?f[0]:f:a(this,_)}return this},l.prototype.removeAllListeners=function(i){var c;return i?(c=e?e+i:i,this._events[c]&&a(this,c)):(this._events=new t,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,s.exports=l}(Z)),Z.exports}var We=Ke();const oe=fe(We);var He=function(){var s=function(o,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},s(o,e)};return function(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_e=function(s){He(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o}(oe),Ue=function(){var s=function(o,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},s(o,e)};return function(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),re=function(){return re=Object.assign||function(s){for(var o,e=1,t=arguments.length;e<t;e++){o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(s[n]=o[n])}return s},re.apply(this,arguments)},ee=function(s,o,e,t){function n(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(c){try{i(t.next(c))}catch(d){a(d)}}function u(c){try{i(t.throw(c))}catch(d){a(d)}}function i(c){c.done?r(c.value):n(c.value).then(l,u)}i((t=t.apply(s,o||[])).next())})},te=function(s,o){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},t,n,r,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(i){return function(c){return u([i,c])}}function u(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(e=0)),e;)try{if(t=1,n&&(r=i[0]&2?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[i[0]&2,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,n=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!r||i[1]>r[0]&&i[1]<r[3])){e.label=i[1];break}if(i[0]===6&&e.label<r[1]){e.label=r[1],r=i;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(i);break}r[2]&&e.ops.pop(),e.trys.pop();continue}i=o.call(s,e)}catch(c){i=[6,c],n=0}finally{t=r=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},le=function(s,o){var e=typeof Symbol=="function"&&s[Symbol.iterator];if(!e)return s;var t=e.call(s),n,r=[],a;try{for(;(o===void 0||o-- >0)&&!(n=t.next()).done;)r.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return r},Le=function(s){Ue(o,s);function o(e,t){var n=s.call(this)||this;if(n._handleMessage=function(r){if(n._injectedProvider&&r.source===window||r.origin===n._providerUrl.origin&&r.source===n._popup){if(r.data.method==="connected"){var a=new D(r.data.params.publicKey);(!n._publicKey||!n._publicKey.equals(a))&&(n._publicKey&&!n._publicKey.equals(a)&&n._handleDisconnect(),n._publicKey=a,n._autoApprove=!!r.data.params.autoApprove,n.emit("connect",n._publicKey))}else if(r.data.method==="disconnected")n._handleDisconnect();else if((r.data.result||r.data.error)&&n._responsePromises.has(r.data.id)){var l=le(n._responsePromises.get(r.data.id),2),u=l[0],i=l[1];r.data.result?u(r.data.result):i(new Error(r.data.error))}}},n._handleConnect=function(){return n._handlerAdded||(n._handlerAdded=!0,window.addEventListener("message",n._handleMessage),window.addEventListener("beforeunload",n.disconnect)),n._injectedProvider?new Promise(function(r){n._sendRequest("connect",{}),r()}):(window.name="parent",n._popup=window.open(n._providerUrl.toString(),"_blank","location,resizable,width=460,height=675"),new Promise(function(r){n.once("connect",r)}))},n._handleDisconnect=function(){n._handlerAdded&&(n._handlerAdded=!1,window.removeEventListener("message",n._handleMessage),window.removeEventListener("beforeunload",n.disconnect)),n._publicKey&&(n._publicKey=null,n.emit("disconnect")),n._responsePromises.forEach(function(r,a){var l=le(r,2);l[0];var u=l[1];n._responsePromises.delete(a),u("Wallet disconnected")})},n._sendRequest=function(r,a){return ee(n,void 0,void 0,function(){var l,u=this;return te(this,function(i){if(r!=="connect"&&!this.connected)throw new Error("Wallet not connected");return l=this._nextRequestId,++this._nextRequestId,[2,new Promise(function(c,d){u._responsePromises.set(l,[c,d]),u._injectedProvider?u._injectedProvider.postMessage({jsonrpc:"2.0",id:l,method:r,params:re({network:u._network},a)}):(u._popup.postMessage({jsonrpc:"2.0",id:l,method:r,params:a},u._providerUrl.origin),u.autoApprove||u._popup.focus())})]})})},n.connect=function(){return n._popup&&n._popup.close(),n._handleConnect()},n.disconnect=function(){return ee(n,void 0,void 0,function(){return te(this,function(r){switch(r.label){case 0:return this._injectedProvider?[4,this._sendRequest("disconnect",{})]:[3,2];case 1:r.sent(),r.label=2;case 2:return this._popup&&this._popup.close(),this._handleDisconnect(),[2]}})})},n.sign=function(r,a){return ee(n,void 0,void 0,function(){var l,u,i;return te(this,function(c){switch(c.label){case 0:if(!(r instanceof Uint8Array))throw new Error("Data must be an instance of Uint8Array");return[4,this._sendRequest("sign",{data:r,display:a})];case 1:return l=c.sent(),u=m.decode(l.signature),i=new D(l.publicKey),[2,{signature:u,publicKey:i}]}})})},ze(e))n._injectedProvider=e;else if(Re(e))n._providerUrl=new URL(e),n._providerUrl.hash=new URLSearchParams({origin:window.location.origin,network:t}).toString();else throw new Error("provider parameter must be an injected provider or a URL string.");return n._network=t,n._publicKey=null,n._autoApprove=!1,n._popup=null,n._handlerAdded=!1,n._nextRequestId=1,n._responsePromises=new Map,n}return Object.defineProperty(o.prototype,"publicKey",{get:function(){return this._publicKey},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"connected",{get:function(){return this._publicKey!==null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"autoApprove",{get:function(){return this._autoApprove},enumerable:!1,configurable:!0}),o}(oe);function Re(s){return typeof s=="string"}function ze(s){return $e(s)&&Fe(s.postMessage)}function $e(s){return typeof s=="object"&&s!==null}function Fe(s){return typeof s=="function"}var qe=function(){var s=function(o,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},s(o,e)};return function(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),T=function(s,o,e,t){function n(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(c){try{i(t.next(c))}catch(d){a(d)}}function u(c){try{i(t.throw(c))}catch(d){a(d)}}function i(c){c.done?r(c.value):n(c.value).then(l,u)}i((t=t.apply(s,o||[])).next())})},M=function(s,o){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},t,n,r,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(i){return function(c){return u([i,c])}}function u(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(e=0)),e;)try{if(t=1,n&&(r=i[0]&2?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[i[0]&2,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,n=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!r||i[1]>r[0]&&i[1]<r[3])){e.label=i[1];break}if(i[0]===6&&e.label<r[1]){e.label=r[1],r=i;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(i);break}r[2]&&e.ops.pop(),e.trys.pop();continue}i=o.call(s,e)}catch(c){i=[6,c],n=0}finally{t=r=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},De=function(s){qe(o,s);function o(e,t,n){var r=s.call(this)||this;return r._instance=null,r.handleMessage=function(a){},r._sendRequest=function(a,l){return T(r,void 0,void 0,function(){var u,i;return M(this,function(c){switch(c.label){case 0:return!((u=this._instance)===null||u===void 0)&&u.sendRequest?[4,this._instance.sendRequest(a,l)]:[3,2];case 1:return[2,c.sent()];case 2:return!((i=this._instance)===null||i===void 0)&&i._sendRequest?[4,this._instance._sendRequest(a,l)]:[3,4];case 3:return[2,c.sent()];case 4:throw new Error("Unsupported version of `@project-serum/sol-wallet-adapter`")}})})},r._handleConnect=function(){r.emit("connect")},r._handleDisconnect=function(){window.clearInterval(r._pollTimer),r.emit("disconnect")},r._network=t,r._provider=n,r}return Object.defineProperty(o.prototype,"publicKey",{get:function(){return this._instance.publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"connected",{get:function(){return this._instance.connected||!1},enumerable:!1,configurable:!0}),o.prototype.connect=function(){return T(this,void 0,void 0,function(){var e=this;return M(this,function(t){switch(t.label){case 0:return this._instance=new Le(this._provider,this._network),this._instance.on("connect",this._handleConnect),this._instance.on("disconnect",this._handleDisconnect),this._pollTimer=window.setInterval(function(){var n,r;((r=(n=e._instance)===null||n===void 0?void 0:n._popup)===null||r===void 0?void 0:r.closed)!==!1&&e._handleDisconnect()},200),[4,this._instance.connect()];case 1:return t.sent(),[2]}})})},o.prototype.disconnect=function(){return T(this,void 0,void 0,function(){return M(this,function(e){switch(e.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return this._instance.removeAllListeners("connect"),this._instance.removeAllListeners("disconnect"),[4,this._instance.disconnect()];case 1:return e.sent(),[2]}})})},o.prototype.signTransaction=function(e){return T(this,void 0,void 0,function(){var t;return M(this,function(n){switch(n.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._sendRequest("signTransactionV2",{transaction:m.encode(e)})];case 1:return t=n.sent().transaction,[2,m.decode(t)]}})})},o.prototype.signAllTransactions=function(e){return T(this,void 0,void 0,function(){var t;return M(this,function(n){switch(n.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._sendRequest("signAllTransactionsV2",{transactions:e.map(function(r){return m.encode(r)})})];case 1:return t=n.sent().transactions,[2,t.map(function(r){return m.decode(r)})]}})})},o.prototype.signAndSendTransaction=function(e,t){return T(this,void 0,void 0,function(){var n;return M(this,function(r){switch(r.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._sendRequest("signAndSendTransaction",{transaction:m.encode(e),options:t})];case 1:return n=r.sent(),[2,n.signature]}})})},o.prototype.signMessage=function(e,t){return t===void 0&&(t="hex"),T(this,void 0,void 0,function(){var n;return M(this,function(r){switch(r.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._instance.sign(e,t)];case 1:return n=r.sent().signature,[2,Uint8Array.from(n)]}})})},o}(_e);let U;const Ne=new Uint8Array(16);function Ve(){if(!U&&(U=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(Ne)}const b=[];for(let s=0;s<256;++s)b.push((s+256).toString(16).slice(1));function Ge(s,o=0){return b[s[o+0]]+b[s[o+1]]+b[s[o+2]]+b[s[o+3]]+"-"+b[s[o+4]]+b[s[o+5]]+"-"+b[s[o+6]]+b[s[o+7]]+"-"+b[s[o+8]]+b[s[o+9]]+"-"+b[s[o+10]]+b[s[o+11]]+b[s[o+12]]+b[s[o+13]]+b[s[o+14]]+b[s[o+15]]}const Be=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ue={randomUUID:Be};function Je(s,o,e){if(ue.randomUUID&&!s)return ue.randomUUID();s=s||{};const t=s.random||(s.rng||Ve)();return t[6]=t[6]&15|64,t[8]=t[8]&63|128,Ge(t)}var Qe=function(){var s=function(o,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},s(o,e)};return function(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ie=function(){return ie=Object.assign||function(s){for(var o,e=1,t=arguments.length;e<t;e++){o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(s[n]=o[n])}return s},ie.apply(this,arguments)},C=function(s,o,e,t){function n(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(c){try{i(t.next(c))}catch(d){a(d)}}function u(c){try{i(t.throw(c))}catch(d){a(d)}}function i(c){c.done?r(c.value):n(c.value).then(l,u)}i((t=t.apply(s,o||[])).next())})},k=function(s,o){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},t,n,r,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(i){return function(c){return u([i,c])}}function u(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(e=0)),e;)try{if(t=1,n&&(r=i[0]&2?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[i[0]&2,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,n=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!r||i[1]>r[0]&&i[1]<r[3])){e.label=i[1];break}if(i[0]===6&&e.label<r[1]){e.label=r[1],r=i;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(i);break}r[2]&&e.ops.pop(),e.trys.pop();continue}i=o.call(s,e)}catch(c){i=[6,c],n=0}finally{t=r=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},de=function(s){Qe(o,s);function o(e,t){var n=this,r;return n=s.call(this)||this,n._publicKey=null,n._messageHandlers={},n.handleMessage=function(a){if(n._messageHandlers[a.id]){var l=n._messageHandlers[a.id],u=l.resolve,i=l.reject;delete n._messageHandlers[a.id],a.error?i(a.error):u(a.result)}},n._sendMessage=function(a){if(!n.connected)throw new Error("Wallet not connected");return new Promise(function(l,u){var i,c,d=Je();n._messageHandlers[d]={resolve:l,reject:u},(c=(i=n._iframe)===null||i===void 0?void 0:i.contentWindow)===null||c===void 0||c.postMessage({channel:"solflareWalletAdapterToIframe",data:ie({id:d},a)},"*")})},n._iframe=e,n._publicKey=new D((r=t==null?void 0:t.toString)===null||r===void 0?void 0:r.call(t)),n}return Object.defineProperty(o.prototype,"publicKey",{get:function(){return this._publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"connected",{get:function(){return!0},enumerable:!1,configurable:!0}),o.prototype.connect=function(){return C(this,void 0,void 0,function(){return k(this,function(e){return[2]})})},o.prototype.disconnect=function(){return C(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return[4,this._sendMessage({method:"disconnect"})];case 1:return e.sent(),[2]}})})},o.prototype.signTransaction=function(e){var t;return C(this,void 0,void 0,function(){var n,r;return k(this,function(a){switch(a.label){case 0:if(!this.connected)throw new Error("Wallet not connected");a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._sendMessage({method:"signTransaction",params:{transaction:m.encode(e)}})];case 2:return n=a.sent(),[2,m.decode(n)];case 3:throw r=a.sent(),new Error(((t=r==null?void 0:r.toString)===null||t===void 0?void 0:t.call(r))||"Failed to sign transaction");case 4:return[2]}})})},o.prototype.signAllTransactions=function(e){var t;return C(this,void 0,void 0,function(){var n,r;return k(this,function(a){switch(a.label){case 0:if(!this.connected)throw new Error("Wallet not connected");a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._sendMessage({method:"signAllTransactions",params:{transactions:e.map(function(l){return m.encode(l)})}})];case 2:return n=a.sent(),[2,n.map(function(l){return m.decode(l)})];case 3:throw r=a.sent(),new Error(((t=r==null?void 0:r.toString)===null||t===void 0?void 0:t.call(r))||"Failed to sign transactions");case 4:return[2]}})})},o.prototype.signAndSendTransaction=function(e,t){var n;return C(this,void 0,void 0,function(){var r,a;return k(this,function(l){switch(l.label){case 0:if(!this.connected)throw new Error("Wallet not connected");l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this._sendMessage({method:"signAndSendTransaction",params:{transaction:m.encode(e),options:t}})];case 2:return r=l.sent(),[2,r];case 3:throw a=l.sent(),new Error(((n=a==null?void 0:a.toString)===null||n===void 0?void 0:n.call(a))||"Failed to sign and send transaction");case 4:return[2]}})})},o.prototype.signMessage=function(e,t){var n;return t===void 0&&(t="hex"),C(this,void 0,void 0,function(){var r,a;return k(this,function(l){switch(l.label){case 0:if(!this.connected)throw new Error("Wallet not connected");l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this._sendMessage({method:"signMessage",params:{data:e,display:t}})];case 2:return r=l.sent(),[2,Uint8Array.from(m.decode(r))];case 3:throw a=l.sent(),new Error(((n=a==null?void 0:a.toString)===null||n===void 0?void 0:n.call(a))||"Failed to sign message");case 4:return[2]}})})},o}(_e);function K(s){return s.version===void 0}var Xe="1.4.2",Ye=function(){var s=function(o,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},s(o,e)};return function(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),W=function(){return W=Object.assign||function(s){for(var o,e=1,t=arguments.length;e<t;e++){o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(s[n]=o[n])}return s},W.apply(this,arguments)},A=function(s,o,e,t){function n(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(c){try{i(t.next(c))}catch(d){a(d)}}function u(c){try{i(t.throw(c))}catch(d){a(d)}}function i(c){c.done?r(c.value):n(c.value).then(l,u)}i((t=t.apply(s,o||[])).next())})},I=function(s,o){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},t,n,r,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(i){return function(c){return u([i,c])}}function u(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(e=0)),e;)try{if(t=1,n&&(r=i[0]&2?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[i[0]&2,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,n=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!r||i[1]>r[0]&&i[1]<r[3])){e.label=i[1];break}if(i[0]===6&&e.label<r[1]){e.label=r[1],r=i;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(i);break}r[2]&&e.ops.pop(),e.trys.pop();continue}i=o.call(s,e)}catch(c){i=[6,c],n=0}finally{t=r=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Ze=function(s){var o=typeof Symbol=="function"&&Symbol.iterator,e=o&&s[o],t=0;if(e)return e.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&t>=s.length&&(s=void 0),{value:s&&s[t++],done:!s}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},et=function(s){Ye(o,s);function o(e){var t=s.call(this)||this;return t._network="mainnet-beta",t._provider=null,t._iframeParams={},t._adapterInstance=null,t._element=null,t._iframe=null,t._connectHandler=null,t._flutterHandlerInterval=null,t._handleEvent=function(n){var r,a,l,u;switch(n.type){case"connect_native_web":{t._collapseIframe(),t._adapterInstance=new De(t._iframe,t._network,((r=n.data)===null||r===void 0?void 0:r.provider)||t._provider||"https://solflare.com/provider"),t._adapterInstance.on("connect",t._webConnected),t._adapterInstance.on("disconnect",t._webDisconnected),t._adapterInstance.connect(),t._setPreferredAdapter("native_web");return}case"connect":{t._collapseIframe(),t._adapterInstance=new de(t._iframe,((a=n.data)===null||a===void 0?void 0:a.publicKey)||""),t._adapterInstance.connect(),t._setPreferredAdapter((l=n.data)===null||l===void 0?void 0:l.adapter),t._connectHandler&&(t._connectHandler.resolve(),t._connectHandler=null),t.emit("connect",t.publicKey);return}case"disconnect":{t._connectHandler&&(t._connectHandler.reject(),t._connectHandler=null),t._disconnected(),t.emit("disconnect");return}case"accountChanged":{!((u=n.data)===null||u===void 0)&&u.publicKey?(t._adapterInstance=new de(t._iframe,n.data.publicKey),t._adapterInstance.connect(),t.emit("accountChanged",t.publicKey)):t.emit("accountChanged",void 0);return}case"collapse":{t._collapseIframe();return}default:return}},t._handleResize=function(n){n.resizeMode==="full"?n.params.mode==="fullscreen"?t._expandIframe():n.params.mode==="hide"&&t._collapseIframe():n.resizeMode==="coordinates"&&t._iframe&&(t._iframe.style.top=isFinite(n.params.top)?"".concat(n.params.top,"px"):"",t._iframe.style.bottom=isFinite(n.params.bottom)?"".concat(n.params.bottom,"px"):"",t._iframe.style.left=isFinite(n.params.left)?"".concat(n.params.left,"px"):"",t._iframe.style.right=isFinite(n.params.right)?"".concat(n.params.right,"px"):"",t._iframe.style.width=isFinite(n.params.width)?"".concat(n.params.width,"px"):n.params.width,t._iframe.style.height=isFinite(n.params.height)?"".concat(n.params.height,"px"):n.params.height)},t._handleMessage=function(n){var r;if(((r=n.data)===null||r===void 0?void 0:r.channel)==="solflareIframeToWalletAdapter"){var a=n.data.data||{};a.type==="event"?t._handleEvent(a.event):a.type==="resize"?t._handleResize(a):a.type==="response"&&t._adapterInstance&&t._adapterInstance.handleMessage(a)}},t._removeElement=function(){t._flutterHandlerInterval!==null&&(clearInterval(t._flutterHandlerInterval),t._flutterHandlerInterval=null),t._element&&(t._element.remove(),t._element=null)},t._removeDanglingElements=function(){var n,r,a=document.getElementsByClassName("solflare-wallet-adapter-iframe");try{for(var l=Ze(a),u=l.next();!u.done;u=l.next()){var i=u.value;i.parentElement&&i.remove()}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}},t._injectElement=function(){t._removeElement(),t._removeDanglingElements();var n=W(W({},t._iframeParams),{cluster:t._network||"mainnet-beta",origin:window.location.origin||"",title:document.title||"",version:1,sdkVersion:Xe}),r=t._getPreferredAdapter();r&&(n.adapter=r),t._provider&&(n.provider=t._provider);var a=Object.keys(n).map(function(u){return"".concat(u,"=").concat(encodeURIComponent(n[u]))}).join("&"),l="".concat(o.IFRAME_URL,"?").concat(a);t._element=document.createElement("div"),t._element.className="solflare-wallet-adapter-iframe",t._element.innerHTML=`
      <iframe src='`.concat(l,`' referrerPolicy='strict-origin-when-cross-origin' style='position: fixed; top: 0; bottom: 0; left: 0; right: 0; width: 100%; height: 100%; border: none; border-radius: 0; z-index: 99999; color-scheme: auto;' allowtransparency='true'></iframe>
    `),document.body.appendChild(t._element),t._iframe=t._element.querySelector("iframe"),window.fromFlutter=t._handleMobileMessage,t._flutterHandlerInterval=setInterval(function(){window.fromFlutter=t._handleMobileMessage},100),window.addEventListener("message",t._handleMessage,!1)},t._collapseIframe=function(){t._iframe&&(t._iframe.style.top="",t._iframe.style.right="",t._iframe.style.height="2px",t._iframe.style.width="2px")},t._expandIframe=function(){t._iframe&&(t._iframe.style.top="0px",t._iframe.style.bottom="0px",t._iframe.style.left="0px",t._iframe.style.right="0px",t._iframe.style.width="100%",t._iframe.style.height="100%")},t._getPreferredAdapter=function(){return localStorage&&localStorage.getItem("solflarePreferredWalletAdapter")||null},t._setPreferredAdapter=function(n){localStorage&&n&&localStorage.setItem("solflarePreferredWalletAdapter",n)},t._clearPreferredAdapter=function(){localStorage&&localStorage.removeItem("solflarePreferredWalletAdapter")},t._webConnected=function(){t._connectHandler&&(t._connectHandler.resolve(),t._connectHandler=null),t.emit("connect",t.publicKey)},t._webDisconnected=function(){t._connectHandler&&(t._connectHandler.reject(),t._connectHandler=null),t._disconnected(),t.emit("disconnect")},t._disconnected=function(){window.removeEventListener("message",t._handleMessage,!1),t._removeElement(),t._clearPreferredAdapter(),t._adapterInstance=null},t._handleMobileMessage=function(n){var r,a;(a=(r=t._iframe)===null||r===void 0?void 0:r.contentWindow)===null||a===void 0||a.postMessage({channel:"solflareMobileToIframe",data:n},"*")},e!=null&&e.network&&(t._network=e==null?void 0:e.network),e!=null&&e.provider&&(t._provider=e==null?void 0:e.provider),e!=null&&e.params&&(t._iframeParams=W({},e==null?void 0:e.params)),t}return Object.defineProperty(o.prototype,"publicKey",{get:function(){var e;return((e=this._adapterInstance)===null||e===void 0?void 0:e.publicKey)||null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isConnected",{get:function(){var e;return!!(!((e=this._adapterInstance)===null||e===void 0)&&e.connected)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"connected",{get:function(){return this.isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"autoApprove",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.connect=function(){return A(this,void 0,void 0,function(){var e=this;return I(this,function(t){switch(t.label){case 0:return this.connected?[2]:(this._injectElement(),[4,new Promise(function(n,r){e._connectHandler={resolve:n,reject:r}})]);case 1:return t.sent(),[2]}})})},o.prototype.disconnect=function(){return A(this,void 0,void 0,function(){return I(this,function(e){switch(e.label){case 0:return this._adapterInstance?[4,this._adapterInstance.disconnect()]:[2];case 1:return e.sent(),this._disconnected(),this.emit("disconnect"),[2]}})})},o.prototype.signTransaction=function(e){return A(this,void 0,void 0,function(){var t,n;return I(this,function(r){switch(r.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return t=K(e)?Uint8Array.from(e.serialize({verifySignatures:!1,requireAllSignatures:!1})):e.serialize(),[4,this._adapterInstance.signTransaction(t)];case 1:return n=r.sent(),[2,K(e)?N.from(n):O.deserialize(n)]}})})},o.prototype.signAllTransactions=function(e){return A(this,void 0,void 0,function(){var t,n;return I(this,function(r){switch(r.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return t=e.map(function(a){return K(a)?Uint8Array.from(a.serialize({verifySignatures:!1,requireAllSignatures:!1})):a.serialize()}),[4,this._adapterInstance.signAllTransactions(t)];case 1:if(n=r.sent(),n.length!==e.length)throw new Error("Failed to sign all transactions");return[2,n.map(function(a,l){return K(e[l])?N.from(a):O.deserialize(a)})]}})})},o.prototype.signAndSendTransaction=function(e,t){return A(this,void 0,void 0,function(){var n;return I(this,function(r){switch(r.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return n=K(e)?e.serialize({verifySignatures:!1,requireAllSignatures:!1}):e.serialize(),[4,this._adapterInstance.signAndSendTransaction(n,t)];case 1:return[2,r.sent()]}})})},o.prototype.signMessage=function(e,t){return t===void 0&&(t="utf8"),A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._adapterInstance.signMessage(e,t)];case 1:return[2,n.sent()]}})})},o.prototype.sign=function(e,t){return t===void 0&&(t="utf8"),A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,this.signMessage(e,t)];case 1:return[2,n.sent()]}})})},o.prototype.detectWallet=function(e){var t;return e===void 0&&(e=10),A(this,void 0,void 0,function(){return I(this,function(n){return window.SolflareApp||!((t=window.solflare)===null||t===void 0)&&t.isSolflare?[2,!0]:[2,new Promise(function(r){var a,l;a=setInterval(function(){var u;(window.SolflareApp||!((u=window.solflare)===null||u===void 0)&&u.isSolflare)&&(clearInterval(a),clearTimeout(l),r(!0))},500),l=setTimeout(function(){clearInterval(a),r(!1)},e*1e3)})]})})},o.IFRAME_URL="https://connect.solflare.com/",o}(oe);const ot=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));export{ot as a,it as i};
